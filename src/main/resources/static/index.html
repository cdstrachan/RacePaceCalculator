<!doctype html>
<html ng-app="PaceChartCalculator">

<head>
	<title>Pace Chart Calculator</title>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.3/angular.min.js"></script>
	<script src="js/pacecalculator.js"></script>
	<!-- Optional theme -->
	<link rel="stylesheet" href="less/styles.css" crossorigin="anonymous">

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<body>
		<div ng-controller="Pacecalculator" class="container">
		<div class="validationerror">Pace calculator for running events - experimental (v1.03)</div>
			<h1>Input parameters</h1>
			<form>
				<table>
					<tr>
						<td class="mainborder" width="120px">Race name</td>
						<td class="subborder"  width="120px">
							<input class="inputlarge" type="text" ng-model="paceChartInput.raceName" maxlength="20" /></td>
						<td class="subborder"><div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">The name of your race.</span></div></td>
						<td rowspan=8 style="vertical-align: top">
This calculator is used to calculated suggested paces for running events. It takes into account the elevation of each split, delay at the start due to congestion, and fade due to the runner getting tired towards the end.<br/>
<br/>
This calculations are a "best-bet" calculation without knowledge of a particular race, hence the calculator is not intended to be used to replace a hand-crafted chart.<br/>
<br/>
This is just a guide, you are responsible for running your own race, and you are responsible for your own pacing!<br/>
<br/>
<a href="https://www.facebook.com/groups/314436651950192" target="_blank" >If you are in Cape Town, you can usually get excellent handcrafted pacecharts for the main races here.</a>
</td>
						
					</tr>
					<tr>
						<td class="mainborder">Distance</td>
						<td class="subborder">
							<input class="inputmedium" type="number" ng-model="paceChartInput.distance" min="1" max="99" step="0.1"/>
							<input type="submit" ng-click="createChartTemplate(paceChartInput.distance)" value="Set"/></td>
						</td>
						<td class="subborder"><div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">Enter the distance and hit <i>set</i> - splits will be created to match the distance.</span></div></td>
					</tr>
					<tr>
						<td class="mainborder">First finish time<br/>(hh:mm:ss)</td>
						<td class="subborder">
							<input class="inputmedium" type="text" ng-model="paceChartInput.plannedRaceTimeFirst" pattern="[0-9]{2}:[0-5][0-9]:[0-5][0-9]"/>
						</td>
						<td class="subborder"><div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">Finish time for first finish.</span></div></td>
					</tr>
					<tr>
						<td class="mainborder">Last finish time<br/>(hh:mm:ss)</td>
						<td class="subborder">
							<input class="inputmedium" type="text" ng-model="paceChartInput.plannedRaceTimeLast"  pattern="[0-9]{2}:[0-5][0-9]:[0-5][0-9]"/>
						</td>
						<td class="subborder"><div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">Finish time for last finish.</span></div></td>
					</tr>
					<tr>
						<td class="mainborder">Time increment<br/>(hh:mm:ss)</td>
						<td class="subborder">
							<input class="inputmedium" type="text" ng-model="paceChartInput.plannedRaceTimeDelta"  pattern="[0-9]{2}:[0-5][0-9]:[0-5][0-9]"/>
						</td>
						<td class="subborder"><div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">Finish time increment - e.g. create a chart every 10 mintues from the first finish time to the last finish time.</span></div></td>
					</tr>
					<tr>
						<td class="mainborder">Start delay<br/>(hh:mm:ss)</td>
						<td class="subborder">
							<input class="inputmedium" type="text" ng-model="paceChartInput.startDelay"  pattern="[0-9]{2}:[0-5][0-9]:[0-5][0-9]"/>
						</td>
						<td class="subborder"><div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">Anticipated delay due to start line congestion.</span></div></td>
					</tr>
					<tr>
						<td class="mainborder">First fade %</td>
						<td class="subborder">
							<input class="inputsmall" type="number" ng-model="paceChartInput.firstFade" min="0" max="99"/>
						</td>
						<td class="subborder"><div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">A 2% fade means that the second half of a flat course is 2% slower than the first half. You can calculate charts for multiple fades. A chart will be create for each % from the first fade to the last fade.</span></div></td>
					</tr>
					<tr>
						<td class="mainborder">Last fade %</td>
						<td class="subborder">
							<input class="inputsmall" type="number" ng-model="paceChartInput.lastFade" min="0" max="99"/>
						</td>
						<td class="subborder"><div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">Enter the last fade.</span></div></td>
					</tr>
				</table>
				<h1>Split data</h1>
				<table wicth="100%">
					<tr>
						<td class="subborder" width="60px">Split</td>
						<td class="subborder" width="120px">Elevation (m) <div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">Enter the total change in elevation for each split.</span></div></td>
						<td class="subborder" width="150px">Manual Weighting <div class="tooltip">&nbsp;<u>?</u>&nbsp;<span class="tooltiptext">The manual weighting can be used to override the default calculations. Make it a little lower to make the split faster, or higher to make the split slower. Usually you can ignore it.</span></div></td>
						<td class="noborder" rowspan="8" width="50%">
							
							<div class="validationerror" >{{loadingmessage}}</div>
							<div class="criticalerror" >{{CriticalErrorMessage}}</div>
							<div ng-repeat="validationMessage in paceChart.validationErrorMessages">
								<div class="validationerror">{{validationMessage.messageDescription}}</div>
							</div>
			

						</td>
					</tr>
					<tr ng-repeat="splitInput in paceChartInput.splitInputs">
						<td class="maindata">{{splitInput.splitDistance}}</td>
						<td class="maindata">
							<input class="inputsmall" type="number" ng-model="splitInput.elevation" min="-200" max="200"/>
						</td>
						<td class="maindata">
							<input class="inputmedium" type="number" ng-model="splitInput.manualWeight" min="-200" max="200" step="5"/>
						</td>
					</tr>

				</table>
				<input type="submit" ng-click="createChart()" value="Create charts" />
			</form>
			<h1>Pacecharts</h1>
			<div ng-repeat="paceChartInstance in paceChart.paceChartInstances">
				
				<br/>
				<table>
					<tr>
						<td colspan="1" class="mainborder">Race</td>
						<td colspan="4" class="subborder">{{paceChart.distance}}k - {{paceChart.raceName}}, {{paceChartInstance.fade}}% fade</td>
					</tr>
					<tr>
						<td colspan="1" class="mainborder">Time</td>
						<td colspan="1" class="subborder">{{paceChartInstance.plannedRaceTime}}</td>
						<td colspan="1" class="mainborder">Start Delay</td>
						<td colspan="2" class="subborder">{{paceChart.startDelay}}</td>
					</tr>
					<tr>
						<td colspan="1" class="mainborder">Moving pace</td>
						<td colspan="1" class="subborder">{{paceChartInstance.averageMovingPace | formatTime}}</td>
						<td colspan="1" class="mainborder">Avg. Pace</td>
						<td colspan="2" class="subborder">{{paceChartInstance.averageEndToEndPace | formatTime}}</td>
					</tr>
					<tr>
						<td class="mainborder">Distance</td>
						<td class="mainborder">Split Time</td>
						<td class="mainborder">Split Pace</td>
						<td class="mainborder">Elapsed</td>
						<td class="mainborder">Elev.</td>
					</tr>
					<tr ng-repeat="split in paceChartInstance.raceSplits">
					{{split}}
						<td class="mainborder number">{{split.totalDistance}}</td>
						<td class="maindata">{{split.finalTime | formatTime}}</td>
						<td class="maindata">{{split.finalPace | formatTime}}</td>
						<td class="maindata">{{split.finalElapsedTime}}</td>
						<td class="maindata number">{{split.elevation}}</td>
					</tr>
				</table>
				
				<br/>
			</div>
		</div>
	</body>

</html>